{% extends "orders/layout.html" %}
{% load custom_tags %}
{% load static %}

{% block head %}
<title>Odvoz a dovoz</title>
<!-- My own CSS -->
<link rel="stylesheet" href="{% static 'css/odvoz.css' %}">
{% endblock %}

{% block body %}
<h1 class="heading">Dovoz a Odvoz</h1>


<div class="button">
    <button type="button" class="btn btn-danger btn-square-xl" onclick="attention = false; document.body.style.background = '#eee'">Vidím</button>
</div>
{% csrf_token %}
<div class="orders">
    <div id="rozmitacka" class="parent">
        <h1 class="heading" id="rozmitacka_heading" style="display:none;">Rozmítačka</h1>
    </div>
    <div id="hoblovani" class="parent">
        <h1 class="heading" id="hoblovani_heading" style="display:none;">Hoblování</h1>
    </div>
</div>

<script>
    var URLgo = "{% url 'orders:getOdvoz' %}";
</script>
<script type="text/javascript" src="{% static 'js/odvoz.js' %}"></script>
<script>

    // had to put the jinja2 loops in the html folder in order for it to work
    // ODVOZ //
    function rozmitackaO(){
        {% for order in rozmitacka %}
            if (r_odvoz.includes({{ order.id }}) && !r_odvoz_visible.includes({{ order.id }})){
                var temp = '<div class="r+odvoz" id="{{ order.id }}"> <h1>Odvoz - <a class="mb-0" style="color: #00F; text-decoration: none;" href="{% url "orders:r_info" order.id %}">Objednávka číslo {{order.id}}</a></h1><button type="button" class="btn btn-primary btn-square-m hide">Smazat</button> <div class="detailsMO" id="r{{ order.id }}"> <div class="row" style="margin-top: 1rem;"> <div class="col-sm-3"> <h1 class="mb-0">Zákazník:</h1></div> <div class="col-sm-9   text-secondary"> {{ order.zakaznik }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Materiál:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.material }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Umístění materiálu:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.umisteni_materialu }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Požadovaný rozměr:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.pozadovany_rozmer }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Požadovaná délka:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.pozadovana_delka }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Poznámka:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.poznamka }}</div> </div> <hr><div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Impregnace:</h6> </div> <div class="col-sm-9 text-secondary"> {% if order.impregnace %}<i style="color:green" class="bi bi-check-circle-fill"></i>{% else %}<i style="color:red"class="bi bi-x-circle-fill"></i>{% endif %}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Kapování:</h6> </div> <div class="col-sm-9 text-secondary"> {% if order.kapovani %}<i style="color:green" class="bi bi-check-circle-fill"></i>{% else %}<i style="color:red"class="bi bi-x-circle-fill"></i>{% endif %}</div> </div> <hr> <hr style="height:5px; opacity:1;"> </div><br> <div>';
                rozmitacka.innerHTML += temp;
                r_odvoz_visible.push({{ order.id }});
                c_visible++
            }
        {% endfor %}
    }
    function hoblovaniO(){
        {% for order in hoblovani %}
            if (h_odvoz.includes({{ order.id }}) && !h_odvoz_visible.includes({{ order.id }})){
                var temp = '<div class="h+odvoz" id="{{ order.id }}"> <h1>Odvoz - <a class="mb-0" style="color: #00F; text-decoration: none;" href="{% url "orders:h_info" order.id %}">Objednávka číslo {{order.id}}</a></h1><button type="button" class="btn btn-primary btn-square-m hide">Smazat</button> <div class="detailsMO" id="r{{ order.id }}"> <div class="row" style="margin-top: 1rem;"> <div class="col-sm-3"> <h1 class="mb-0">Zákazník:</h1></div> <div class="col-sm-9   text-secondary"> {{ order.zakaznik }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Skladový materiál:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.skladovy_material }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Požadovaný rozměr:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.pozadovany_rozmer }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Požadovaná délka:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.pozadovana_delka }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Poznámka:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.poznamka }}</div> </div><hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Impregnace:</h6> </div> <div class="col-sm-9 text-secondary"> {% if order.impregnace %}<i style="color:green" class="bi bi-check-circle-fill"></i>{% else %}<i style="color:red"class="bi bi-x-circle-fill"></i>{% endif %}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Kapování:</h6> </div> <div class="col-sm-9 text-secondary"> {% if order.kapovani %}<i style="color:green" class="bi bi-check-circle-fill"></i>{% else %}<i style="color:red"class="bi bi-x-circle-fill"></i>{% endif %}</div> </div> <hr> <hr style="height:5px; opacity:1;"> </div> </div>';
                hoblovani.innerHTML += temp;
                h_odvoz_visible.push({{ order.id }});
                c_visible++
            }
        {% endfor %}
    }

    // DOVOZ //
    function rozmitackaD(){
        {% for order in rozmitacka %}
            if (r_dovoz.includes({{ order.id }}) && !r_dovoz_visible.includes({{ order.id }})){
                var temp = '<div class="r+dovoz" id="{{ order.id }}"> <h1> Dovoz - <a class="mb-0" style="color: #00F; text-decoration: none;" href="{% url "orders:r_info" order.id %}">Objednávka číslo {{order.id}}</a></h1><button type="button" class="btn btn-primary btn-square-m hide">Smazat</button> <div class="detailsMO" id="r{{ order.id }}"> <div class="row" style="margin-top: 1rem;"> <div class="col-sm-3"> <h1 class="mb-0">Zákazník:</h1></div> <div class="col-sm-9   text-secondary"> {{ order.zakaznik }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Materiál:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.material }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Umístění materiálu:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.umisteni_materialu }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Požadovaný rozměr:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.pozadovany_rozmer }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Požadovaná délka:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.pozadovana_delka }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Poznámka:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.poznamka }}</div> </div> <hr style="height:5px; opacity:1;"> </div><br> <div>';
                rozmitacka.innerHTML += temp;
                r_dovoz_visible.push({{ order.id }});
                c_visible++
            }
        {% endfor %}
    }
    function hoblovaniD(){
        {% for order in hoblovani %}
            if (h_dovoz.includes({{ order.id }}) && !h_dovoz_visible.includes({{ order.id }})){
                var temp = '<div class="h+dovoz" id="{{ order.id }}"> <h1> Dovoz - <a class="mb-0" style="color: #00F; text-decoration: none;" href="{% url "orders:h_info" order.id %}">Objednávka číslo {{order.id}}</a></h1><button type="button" class="btn btn-primary btn-square-m hide">Smazat</button> <div class="detailsMO" id="r{{ order.id }}"> <div class="row" style="margin-top: 1rem;"> <div class="col-sm-3"> <h1 class="mb-0">Zákazník:</h1></div> <div class="col-sm-9   text-secondary"> {{ order.zakaznik }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Skladový materiál:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.skladovy_material }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Požadovaný rozměr:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.pozadovany_rozmer }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Požadovaná délka:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.pozadovana_delka }}</div> </div> <hr> <div class="row"> <div class="col-sm-3"> <h6 class="mb-0">Poznámka:</h6> </div> <div class="col-sm-9   text-secondary"> {{ order.poznamka }}</div> </div> <hr style="height:5px; opacity:1;"> </div> </div>';
                hoblovani.innerHTML += temp;
                h_dovoz_visible.push({{ order.id }});
                c_visible++
            }
        {% endfor %}
    }
</script>
{% endblock %}